(function(e){function t(t){for(var s,o,c=t[0],l=t[1],i=t[2],u=0,b=[];u<c.length;u++)o=c[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&b.push(r[o][0]),r[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);d&&d(t);while(b.length)b.shift()();return n.push.apply(n,i||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,c=1;c<a.length;c++){var l=a[c];0!==r[l]&&(s=!1)}s&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},r={app:0},n=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/itorum_test/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"1c29":function(e,t,a){"use strict";a("6860")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("7a23");function r(e,t,a,r,n,o){var c=Object(s["B"])("Header"),l=Object(s["B"])("router-view"),i=Object(s["B"])("Footer");return Object(s["t"])(),Object(s["d"])(s["a"],null,[Object(s["h"])(c),Object(s["h"])(l),Object(s["h"])(i)],64)}var n=Object(s["O"])("data-v-379548a4");Object(s["w"])("data-v-379548a4");var o={class:"hello"},c=Object(s["f"])('<p data-v-379548a4> For a guide and recipes on how to configure / customize this project,<br data-v-379548a4> check out the <a href="https://cli.vuejs.org" target="_blank" rel="noopener" data-v-379548a4>vue-cli documentation</a>. </p><h3 data-v-379548a4>Installed CLI Plugins</h3><ul data-v-379548a4><li data-v-379548a4><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel" target="_blank" rel="noopener" data-v-379548a4>babel</a></li></ul><h3 data-v-379548a4>Essential Links</h3><ul data-v-379548a4><li data-v-379548a4><a href="https://vuejs.org" target="_blank" rel="noopener" data-v-379548a4>Core Docs</a></li><li data-v-379548a4><a href="https://forum.vuejs.org" target="_blank" rel="noopener" data-v-379548a4>Forum</a></li><li data-v-379548a4><a href="https://chat.vuejs.org" target="_blank" rel="noopener" data-v-379548a4>Community Chat</a></li><li data-v-379548a4><a href="https://twitter.com/vuejs" target="_blank" rel="noopener" data-v-379548a4>Twitter</a></li><li data-v-379548a4><a href="https://news.vuejs.org" target="_blank" rel="noopener" data-v-379548a4>News</a></li></ul><h3 data-v-379548a4>Ecosystem</h3><ul data-v-379548a4><li data-v-379548a4><a href="https://router.vuejs.org" target="_blank" rel="noopener" data-v-379548a4>vue-router</a></li><li data-v-379548a4><a href="https://vuex.vuejs.org" target="_blank" rel="noopener" data-v-379548a4>vuex</a></li><li data-v-379548a4><a href="https://github.com/vuejs/vue-devtools#vue-devtools" target="_blank" rel="noopener" data-v-379548a4>vue-devtools</a></li><li data-v-379548a4><a href="https://vue-loader.vuejs.org" target="_blank" rel="noopener" data-v-379548a4>vue-loader</a></li><li data-v-379548a4><a href="https://github.com/vuejs/awesome-vue" target="_blank" rel="noopener" data-v-379548a4>awesome-vue</a></li></ul>',7);Object(s["u"])();var l=n((function(e,t,a,r,n,l){return Object(s["t"])(),Object(s["d"])("div",o,[Object(s["h"])("h1",null,Object(s["D"])(a.msg),1),c])})),i={name:"HelloWorld",props:{msg:String}};a("5cd2");i.render=l,i.__scopeId="data-v-379548a4";var d=i,u=Object(s["O"])("data-v-a72f6534");Object(s["w"])("data-v-a72f6534");var b={class:"navbar navbar-expand-md navbar-light bg-transparent-white p-0"},p={class:"wrapper"},h=Object(s["h"])("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(s["h"])("span",{class:"navbar-toggler-icon"})],-1),O={class:"container-fluid"},m={class:"collapse navbar-collapse",id:"navbarText"},f={class:"navbar-nav me-auto my-2 my-lg-0"},j={class:"nav-item li-nav p-2"},g=Object(s["g"])(" Заказы за неделю "),v={class:"nav-item li-nav p-2"},w=Object(s["g"])(" Все заказы "),y={class:"nav-item li-nav p-2"},k={class:"dropdown me-3"},x={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton2","data-bs-toggle":"dropdown","aria-expanded":"false"},M=Object(s["h"])("i",{class:"far fa-user me-1"},null,-1),_=Object(s["g"])("Пользователь"),L={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton2"},P={key:0},I=Object(s["h"])("i",{class:"fas fa-sign-in-alt me-1"},null,-1),$=Object(s["g"])("Выход "),D=Object(s["h"])("i",{class:"fas fa-sign-in-alt me-1"},null,-1),C=Object(s["g"])("Вход "),U=Object(s["h"])("i",{class:"fas fa-pencil-alt me-1"},null,-1),R=Object(s["g"])("Регистрация ");Object(s["u"])();var S=u((function(e,t,a,r,n,o){var c=Object(s["B"])("router-link"),l=Object(s["B"])("ExportOrders");return Object(s["t"])(),Object(s["d"])("nav",b,[Object(s["h"])("div",p,[h,Object(s["h"])("div",O,[Object(s["h"])("div",m,[Object(s["h"])("ul",f,[Object(s["h"])("li",j,[Object(s["h"])(c,{to:{name:"Home"},class:["nav-link text-dark",{"active-link":"Home"===o.currentRouteName}]},{default:u((function(){return[g]})),_:1},8,["class"])]),Object(s["h"])("li",v,[Object(s["h"])(c,{to:{name:"Orders"},class:["nav-link text-dark",{"active-link":"Orders"===o.currentRouteName}]},{default:u((function(){return[w]})),_:1},8,["class"])]),Object(s["h"])("li",y,[Object(s["h"])(l)])]),Object(s["h"])("div",k,[Object(s["h"])("button",x,[M,o.currentUser?(Object(s["t"])(),Object(s["d"])(s["a"],{key:0},[Object(s["g"])(Object(s["D"])(o.currentUser.username),1)],64)):(Object(s["t"])(),Object(s["d"])(s["a"],{key:1},[_],64))]),Object(s["h"])("ul",L,[o.currentUser?(Object(s["t"])(),Object(s["d"])("li",P,[Object(s["h"])("button",{class:"dropdown-item pb-0 pt-0",onClick:t[1]||(t[1]=function(){return o.handleLogout&&o.handleLogout.apply(o,arguments)})},[I,$])])):(Object(s["t"])(),Object(s["d"])(s["a"],{key:1},[Object(s["h"])("li",null,[Object(s["h"])(c,{to:{name:"Login"},class:"dropdown-item pb-0 pt-0"},{default:u((function(){return[D,C]})),_:1})]),Object(s["h"])("li",null,[Object(s["h"])(c,{to:{name:"Register"},class:"dropdown-item pb-0 pt-0",href:"#"},{default:u((function(){return[U,R]})),_:1})])],64))])])])])])])})),B=(a("b0c0"),Object(s["O"])("data-v-b5120164"));Object(s["w"])("data-v-b5120164");var A={class:"modal fade",id:"modalExportOrders",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},N={class:"modal-dialog"},H={class:"modal-content"},F=Object(s["h"])("div",{class:"modal-header"},[Object(s["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},"Вход"),Object(s["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),E={class:"modal-body"},W={class:"ps-4 pe-1"},q={class:"mb-3 row ps-3 pe-3"},T=Object(s["h"])("label",{for:"inputUsername",class:"col-5 col-form-label p-0 fs-6"},"Имя пользователя",-1),V={class:"col-7 ps-3 pe-0 d-flex flex-row"},z=Object(s["h"])("div",{class:"input-group-prepend"},[Object(s["h"])("span",{class:"input-group-text rounded-0 rounded-start h-100"},[Object(s["h"])("i",{class:"fa fa-id-badge fa-fw fs-6"})])],-1),G={class:"mb-3 row ps-3 pe-3"},J=Object(s["h"])("label",{for:"inputPassword",class:"col-5 col-form-label p-0 fs-6"},"Пароль",-1),X={class:"col-7 ps-3 pe-0 d-flex flex-row"},K=Object(s["h"])("div",{class:"input-group-prepend"},[Object(s["h"])("span",{class:"input-group-text rounded-0 rounded-start h-100"},[Object(s["h"])("i",{class:"fa fa-lock fa-fw fs-6"})])],-1),Q={class:"modal-footer"},Y=Object(s["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть",-1),Z={type:"submit",class:"btn btn-primary"},ee={class:"spinner-border spinner-border-sm me-1"},te=Object(s["h"])("span",null,"Войти",-1);Object(s["u"])();var ae=B((function(e,t,a,r,n,o){var c=Object(s["B"])("FormMessage");return Object(s["t"])(),Object(s["d"])(s["a"],null,[Object(s["h"])("button",{type:"button",onClick:t[1]||(t[1]=function(){return o.downloadOrders&&o.downloadOrders.apply(o,arguments)}),class:"btn bg-transparent shadow-none nav-link text-dark"}," Экспорт заказов "),Object(s["h"])("div",A,[Object(s["h"])("div",N,[Object(s["h"])("form",{onSubmit:t[4]||(t[4]=Object(s["N"])((function(){return o.handleLogin&&o.handleLogin.apply(o,arguments)}),["prevent"]))},[Object(s["h"])("div",H,[F,Object(s["h"])("div",E,[Object(s["h"])("div",W,[n.showMessage?(Object(s["t"])(),Object(s["d"])(c,{key:0,message:n.message,onHideMessage:o.hideMessage},null,8,["message","onHideMessage"])):Object(s["e"])("",!0)]),Object(s["h"])("div",q,[T,Object(s["h"])("div",V,[z,Object(s["L"])(Object(s["h"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return n.user.username=e}),type:"text",class:["form-control rounded-0 rounded-end",{"is-invalid":n.showMessage&&!n.message}],id:"inputUsername",required:""},null,2),[[s["G"],n.user.username]])])]),Object(s["h"])("div",G,[J,Object(s["h"])("div",X,[K,Object(s["L"])(Object(s["h"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return n.user.password=e}),type:"password",class:["form-control rounded-0 rounded-end",{"is-invalid":n.showMessage&&!n.message}],id:"inputPassword",required:""},null,2),[[s["G"],n.user.password]])])])]),Object(s["h"])("div",Q,[Y,Object(s["h"])("button",Z,[Object(s["L"])(Object(s["h"])("span",ee,null,512),[[s["H"],n.loading]]),te])])])],32)])])],64)})),se=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("7b17")),re=a("1da1"),ne=a("d4ec"),oe=a("bee2"),ce=(a("96cf"),a("bc3a")),le=a.n(ce);function ie(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Token "+e.token}:{}}var de={API_URL:"https://kz-api.tk/itorum_test/api/v1/"},ue=de.API_URL,be=function(){function e(){Object(ne["a"])(this,e)}return Object(oe["a"])(e,[{key:"getListCustomers",value:function(){var e=Object(re["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,le.a.get(ue+"customers",{headers:ie()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),pe=new be,he=de.API_URL,Oe=function(){function e(){Object(ne["a"])(this,e)}return Object(oe["a"])(e,[{key:"getListOrders",value:function(){var e=Object(re["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,le.a.get(he+"orders",{headers:ie(),params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteOrder",value:function(){var e=Object(re["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,le.a.delete(he+"orders/".concat(t),{headers:ie()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteListOrders",value:function(){var e=Object(re["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,le.a.delete(he+"orders/delete_list_orders",{headers:ie(),data:{list_ids:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addOrder",value:function(){var e=Object(re["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,le.a.post(he+"orders",t,{headers:ie()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"exportOrders",value:function(){var e=Object(re["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={responseType:"blob",headers:ie()},e.next=3,le.a.get(he+"orders/export",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),me=new Oe,fe=(a("b64b"),a("a15b"),Object(s["O"])("data-v-88155972"));Object(s["w"])("data-v-88155972");var je={key:0,class:"row mt-1 mb-1 d-flex justify-content-center w-100"},ge={class:"alert alert-danger d-flex align-items-center",style:{width:"fit-content"},role:"alert"},ve={class:"mt-1"},we={key:0,class:"d-block"},ye=Object(s["h"])("span",{class:"d-block"},"Введены невалидные данные.",-1),ke=Object(s["h"])("span",{class:"d-block"},"Попробуйте ещё раз.",-1),xe=Object(s["h"])("span",{"aria-hidden":"true",class:"fs-3",style:{"margin-top":"-10px"}},"×",-1);Object(s["u"])();var Me=fe((function(e,t,a,r,n,o){return n.showMessage?(Object(s["t"])(),Object(s["d"])("div",je,[Object(s["h"])("div",ge,[Object(s["h"])("span",ve,[(Object(s["t"])(!0),Object(s["d"])(s["a"],null,Object(s["z"])(Object.keys(a.message),(function(e){return Object(s["t"])(),Object(s["d"])(s["a"],{key:e},[a.message[e]?(Object(s["t"])(),Object(s["d"])("span",we,Object(s["D"])(a.message[e].join("\n")),1)):Object(s["e"])("",!0)],64)})),128)),Object.keys(a.message).length?Object(s["e"])("",!0):(Object(s["t"])(),Object(s["d"])(s["a"],{key:0},[ye,ke],64))]),Object(s["h"])("button",{type:"button",class:"ml-1 p-0 ms-2 btn bg-transparent shadow-none h-100 d-flex align-items-start",onClick:t[1]||(t[1]=function(){return o.deleteMessage&&o.deleteMessage.apply(o,arguments)}),"data-dismiss":"alert","aria-label":"Close"},[xe])])])):Object(s["e"])("",!0)})),_e={name:"FormMessage",props:["message"],emits:["hide-message"],data:function(){return{showMessage:!0}},methods:{deleteMessage:function(){this.showMessage=!1,this.$emit("hide-message")}}};_e.render=Me,_e.__scopeId="data-v-88155972";var Le=_e,Pe=function e(t,a){Object(ne["a"])(this,e),this.username=t,this.password=a},Ie={name:"ExportOrders",NOT_ALLOWED_EXC:["Войдите за пользователя с правами на экспорт заказов."],components:{FormMessage:Le},data:function(){return{user:new Pe,message:"",showMessage:!1,loading:!1}},computed:{currentUser:function(){return this.$store.state.auth.user}},methods:{downloadOrders:function(){var e=this;this.currentUser?(this.message="",this.showMessage=!1,me.exportOrders().then((function(t){e.hideModal();var a=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=a,s.setAttribute("download","orders_list.json"),document.body.appendChild(s),s.click()}),(function(t){e.showMessage=!0,403===t.response.status&&(e.message={exception:e.$options.NOT_ALLOWED_EXC},e.showModal())}))):this.$router.push({name:"Login"})},hideModal:function(){this.user=new Pe;var e=document.querySelector("#modalExportOrders"),t=se["a"].getInstance(e);t&&t.hide()},showModal:function(){var e=new se["a"](document.getElementById("modalExportOrders"),{});e.show()},hideMessage:function(){this.showMessage=!1},handleLogin:function(){var e=this;this.user.username&&this.user.password&&(this.loading=!0,this.message="",this.$store.dispatch("auth/login",this.user).then((function(){e.downloadOrders()}),(function(t){e.loading=!1,e.showMessage=!0,403===t.response.status&&(e.message={exception:e.$options.NOT_ALLOWED_EXC})})))}}};Ie.render=ae,Ie.__scopeId="data-v-b5120164";var $e=Ie,De={name:"Nav",components:{ExportOrders:$e},computed:{currentUser:function(){return this.$store.state.auth.user},currentRouteName:function(){return this.$route.name}},methods:{handleLogout:function(){var e=this;this.$store.dispatch("auth/logout").then((function(){console.log(e.$route.name),e.$router.push({name:"Home"})}))}}};a("8405");De.render=S,De.__scopeId="data-v-a72f6534";var Ce=De,Ue=Object(s["O"])("data-v-1ff79f4e");Object(s["w"])("data-v-1ff79f4e");var Re={class:"mt-auto bg-transparent-gray mt-4"},Se=Object(s["h"])("div",{class:"wrapper"},[Object(s["h"])("div",{class:"d-flex justify-content-center align-items-center"},[Object(s["h"])("p",{class:"mt-2 mb-2"},[Object(s["g"])("© 2021 Copyright: "),Object(s["h"])("a",{href:"https://itorum.ru/",target:"_blank",class:"fw-bold fs-6 btn bg-transparent shadow-none p-0 pb-sm-1"}," Itorum.ru ")])])],-1);Object(s["u"])();var Be=Ue((function(e,t,a,r,n,o){return Object(s["t"])(),Object(s["d"])("footer",Re,[Se])})),Ae={name:"Footer"};Ae.render=Be,Ae.__scopeId="data-v-1ff79f4e";var Ne=Ae,He={name:"App",components:{Footer:Ne,HelloWorld:d,Header:Ce}};a("fe6c");He.render=r;var Fe=He,Ee=a("5502"),We=de.API_URL+"auth/",qe=function(){function e(){Object(ne["a"])(this,e)}return Object(oe["a"])(e,[{key:"login",value:function(e){return le.a.post(We+"login",{username:e.username,password:e.password}).then((function(e){return e.data.token&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"register",value:function(e){return le.a.post(We+"register",e)}}]),e}(),Te=new qe,Ve=JSON.parse(localStorage.getItem("user")),ze=Ve?{status:{loggedIn:!0},user:Ve}:{status:{loggedIn:!1},user:null},Ge={namespaced:!0,state:ze,actions:{login:function(e,t){var a=e.commit;return Te.login(t).then((function(e){return a("loginSuccess",e),Promise.resolve(e)}),(function(e){return a("loginFailure"),Promise.reject(e)}))},logout:function(e){var t=e.commit;Te.logout(),t("logout")},register:function(e,t){var a=e.commit;return Te.register(t).then((function(e){return a("registerSuccess"),Promise.resolve(e.data)}),(function(e){return a("registerFailure"),Promise.reject(e)}))}},mutations:{loginSuccess:function(e,t){e.status.loggedIn=!0,e.user=t},loginFailure:function(e){e.status.loggedIn=!1,e.user=null},logout:function(e){e.status.loggedIn=!1,e.user=null},registerSuccess:function(e){e.status.loggedIn=!1},registerFailure:function(e){e.status.loggedIn=!1}}},Je=Object(Ee["a"])({modules:{auth:Ge},state:{page:1,orders:[]},getters:{getPage:function(e){return e.page},getOrders:function(e){return e.orders}},mutations:{changePage:function(e,t){e.page=t},changeOrders:function(e,t){e.orders=t}}}),Xe=(a("caad"),a("6c02")),Ke=Object(s["O"])("data-v-0fd51738");Object(s["w"])("data-v-0fd51738");var Qe={class:"wrapper ps-4 pe-4"},Ye={class:"d-flex justify-content-center main-block-wrapper"},Ze={class:"main-block d-flex align-items-center justify-content-center mt-3"},et=Object(s["h"])("h1",null,"Ошибка 404",-1),tt=Object(s["g"])("Страница "),at=Object(s["g"])(" не найдена");Object(s["u"])();var st=Ke((function(e,t,a,r,n,o){return Object(s["t"])(),Object(s["d"])("div",Qe,[Object(s["h"])("div",Ye,[Object(s["h"])("div",Ze,[Object(s["h"])("div",null,[et,Object(s["h"])("p",null,[tt,Object(s["h"])("code",null,Object(s["D"])(a.from_url),1),at])])])])])})),rt={name:"NotFound",title:"Ошибка 404",props:["from_url"]};rt.render=st,rt.__scopeId="data-v-0fd51738";var nt=rt,ot=Object(s["O"])("data-v-72fde096");Object(s["w"])("data-v-72fde096");var ct={class:"wrapper mb-5"},lt=Object(s["h"])("h1",{class:"fw-bold mt-5 mb-5 header"},"Вход",-1),it={key:0,class:"row mt-1 mb-1 d-flex justify-content-center w-100"},dt={class:"alert alert-danger d-flex align-items-center",style:{width:"fit-content"},role:"alert"},ut=Object(s["h"])("span",{class:"mt-1"},[Object(s["h"])("span",{class:"d-block"},"Введены невалидные данные."),Object(s["h"])("span",{class:"d-block"},"Попробуйте ещё раз.")],-1),bt=Object(s["h"])("span",{"aria-hidden":"true",class:"fs-3",style:{"margin-top":"-10px"}},"×",-1),pt={class:"d-flex justify-content-center align-items-center form-wrapper"},ht={class:"mb-3 row"},Ot=Object(s["h"])("label",{for:"inputUsername",class:"col-5 col-form-label p-0 fs-5"},"Имя пользователя",-1),mt={class:"col-7 ps-3 pe-0 d-flex flex-row"},ft=Object(s["h"])("div",{class:"input-group-prepend"},[Object(s["h"])("span",{class:"input-group-text rounded-0 rounded-start h-100"},[Object(s["h"])("i",{class:"fa fa-id-badge fa-fw fs-5"})])],-1),jt={class:"mb-3 row"},gt=Object(s["h"])("label",{for:"inputPassword",class:"col-5 col-form-label p-0 fs-5"},"Пароль",-1),vt={class:"col-7 ps-3 pe-0 d-flex flex-row"},wt=Object(s["h"])("div",{class:"input-group-prepend"},[Object(s["h"])("span",{class:"input-group-text rounded-0 rounded-start h-100"},[Object(s["h"])("i",{class:"fa fa-lock fa-fw fs-5"})])],-1),yt={class:"d-flex justify-content-center mt-4 align-items-end"},kt={class:"spinner-border spinner-border-sm me-1"},xt=Object(s["h"])("span",null,"Войти",-1);Object(s["u"])();var Mt=ot((function(e,t,a,r,n,o){return Object(s["t"])(),Object(s["d"])("div",ct,[lt,n.showMessage?(Object(s["t"])(),Object(s["d"])("div",it,[Object(s["h"])("div",dt,[ut,Object(s["h"])("button",{type:"button",class:"ml-1 p-0 ms-2 btn bg-transparent shadow-none h-100 d-flex align-items-start",onClick:t[1]||(t[1]=function(){return o.deleteMessage&&o.deleteMessage.apply(o,arguments)}),"data-dismiss":"alert","aria-label":"Close"},[bt])])])):Object(s["e"])("",!0),Object(s["h"])("div",pt,[Object(s["h"])("form",{class:"form needs-validation",onSubmit:t[4]||(t[4]=Object(s["N"])((function(){return o.handleLogin&&o.handleLogin.apply(o,arguments)}),["prevent"]))},[Object(s["h"])("div",ht,[Ot,Object(s["h"])("div",mt,[ft,Object(s["L"])(Object(s["h"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return n.user.username=e}),type:"text",class:["form-control rounded-0 rounded-end",{"is-invalid":n.showMessage}],id:"inputUsername",required:""},null,2),[[s["G"],n.user.username]])])]),Object(s["h"])("div",jt,[gt,Object(s["h"])("div",vt,[wt,Object(s["L"])(Object(s["h"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return n.user.password=e}),type:"password",class:["form-control rounded-0 rounded-end",{"is-invalid":n.showMessage}],id:"inputPassword",required:""},null,2),[[s["G"],n.user.password]])])]),Object(s["h"])("div",yt,[Object(s["h"])("button",{type:"submit",class:"button button-blue",disabled:n.loading},[Object(s["L"])(Object(s["h"])("span",kt,null,512),[[s["H"],n.loading]]),xt],8,["disabled"])])],32)])])})),_t={name:"Login",title:"Вход",data:function(){return{user:new Pe,loading:!1,showMessage:!1}},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn}},methods:{handleLogin:function(){var e=this;this.user.username&&this.user.password&&(this.loading=!0,this.$store.dispatch("auth/login",this.user).then((function(){e.$router.push({name:"Home"})}),(function(t){e.loading=!1,400===t.response.status&&(e.showMessage=!0)})))},deleteMessage:function(){this.showMessage=!1}}};_t.render=Mt,_t.__scopeId="data-v-72fde096";var Lt=_t,Pt=Object(s["O"])("data-v-995eeba6");Object(s["w"])("data-v-995eeba6");var It={class:"wrapper mb-5"},$t=Object(s["h"])("h1",{class:"fw-bold mt-5 mb-5 header"},"Регистрация",-1),Dt={key:0,class:"row mt-1 mb-1 d-flex justify-content-center w-100"},Ct={class:"alert alert-danger d-flex align-items-center",style:{width:"fit-content"},role:"alert"},Ut={class:"mt-1"},Rt={key:0},St={key:1},Bt=Object(s["h"])("span",{class:"d-block"},"Введены невалидные данные.",-1),At=Object(s["h"])("span",{class:"d-block"},"Попробуйте ещё раз.",-1),Nt=Object(s["h"])("span",{"aria-hidden":"true",class:"fs-3",style:{"margin-top":"-10px"}},"×",-1),Ht={class:"d-flex justify-content-center align-items-center form-wrapper"},Ft={class:"mb-3 row"},Et=Object(s["h"])("label",{for:"inputUsername",class:"col-5 col-form-label p-0 fs-5"},"Имя пользователя",-1),Wt={class:"col-7 ps-3 pe-0 d-flex flex-row"},qt=Object(s["h"])("div",{class:"input-group-prepend"},[Object(s["h"])("span",{class:"input-group-text rounded-0 rounded-start h-100"},[Object(s["h"])("i",{class:"fa fa-id-badge fa-fw fs-5"})])],-1),Tt={class:"mb-3 row"},Vt=Object(s["h"])("label",{for:"inputPassword",class:"col-5 col-form-label p-0 fs-5"},"Пароль",-1),zt={class:"col-7 ps-3 pe-0 d-flex flex-row"},Gt=Object(s["h"])("div",{class:"input-group-prepend"},[Object(s["h"])("span",{class:"input-group-text rounded-0 rounded-start h-100"},[Object(s["h"])("i",{class:"fa fa-lock fa-fw fs-5"})])],-1),Jt={class:"mb-3 row"},Xt=Object(s["h"])("label",{for:"inputPassword2",class:"col-5 col-form-label p-0 fs-5"},"Повторите пароль",-1),Kt={class:"col-7 ps-3 pe-0 d-flex flex-row"},Qt=Object(s["h"])("div",{class:"input-group-prepend"},[Object(s["h"])("span",{class:"input-group-text rounded-0 rounded-start h-100"},[Object(s["h"])("i",{class:"fa fa-lock fa-fw fs-5"})])],-1),Yt={class:"d-flex justify-content-center mt-4 align-items-end"},Zt={class:"spinner-border spinner-border-sm me-1"},ea=Object(s["h"])("span",null,"Регистрация",-1);Object(s["u"])();var ta=Pt((function(e,t,a,r,n,o){return Object(s["t"])(),Object(s["d"])("div",It,[$t,n.showMessage?(Object(s["t"])(),Object(s["d"])("div",Dt,[Object(s["h"])("div",Ct,[Object(s["h"])("span",Ut,[n.message.username?(Object(s["t"])(),Object(s["d"])("span",Rt,Object(s["D"])(n.message.username.join()),1)):Object(s["e"])("",!0),n.message.password?(Object(s["t"])(),Object(s["d"])("span",St,Object(s["D"])(n.message.password.join()),1)):Object(s["e"])("",!0),n.message?Object(s["e"])("",!0):(Object(s["t"])(),Object(s["d"])(s["a"],{key:2},[Bt,At],64))]),Object(s["h"])("button",{type:"button",class:"ml-1 p-0 ms-2 btn bg-transparent shadow-none h-100 d-flex align-items-start",onClick:t[1]||(t[1]=function(){return o.deleteMessage&&o.deleteMessage.apply(o,arguments)}),"data-dismiss":"alert","aria-label":"Close"},[Nt])])])):Object(s["e"])("",!0),Object(s["h"])("div",Ht,[Object(s["h"])("form",{class:"form needs-validation",onSubmit:t[5]||(t[5]=Object(s["N"])((function(){return o.handleRegister&&o.handleRegister.apply(o,arguments)}),["prevent"]))},[Object(s["h"])("div",Ft,[Et,Object(s["h"])("div",Wt,[qt,Object(s["L"])(Object(s["h"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return n.user.username=e}),type:"text",class:["form-control rounded-0 rounded-end",{"is-invalid":n.showMessage&&(n.message.username||!n.message)}],id:"inputUsername",required:""},null,2),[[s["G"],n.user.username]])])]),Object(s["h"])("div",Tt,[Vt,Object(s["h"])("div",zt,[Gt,Object(s["L"])(Object(s["h"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return n.user.password=e}),type:"password",class:["form-control rounded-0 rounded-end",{"is-invalid":n.showMessage&&(n.message.password||!n.message)}],id:"inputPassword",required:""},null,2),[[s["G"],n.user.password]])])]),Object(s["h"])("div",Jt,[Xt,Object(s["h"])("div",Kt,[Qt,Object(s["L"])(Object(s["h"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return n.password2=e}),type:"password",class:["form-control rounded-0 rounded-end",{"is-invalid":n.showMessage&&(n.message.password||!n.message)}],id:"inputPassword2",required:""},null,2),[[s["G"],n.password2]])])]),Object(s["h"])("div",Yt,[Object(s["h"])("button",{type:"submit",class:"button button-blue",disabled:n.loading},[Object(s["L"])(Object(s["h"])("span",Zt,null,512),[[s["H"],n.loading]]),ea],8,["disabled"])])],32)])])})),aa={name:"Register",title:"Регистрация",data:function(){return{user:new Pe,loading:!1,showMessage:!1,password2:"",message:""}},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn}},methods:{handleRegister:function(){var e=this;if(this.user.username&&this.user.password){if(this.user.password.length<5)return this.message={password:["Минимальная длина пароля - 5 символов!"]},void(this.showMessage=!0);this.loading=!0,this.user.password2=this.password2,this.loading=!0,this.$store.dispatch("auth/register",this.user).then((function(){e.$store.dispatch("auth/login",e.user).then((function(){e.$router.push({name:"Home",params:{message:"Вы успешно зарегистрировались!"}})}),(function(){e.$router.push({name:"Login"})}))}),(function(t){e.loading=!1,400===t.response.status&&(e.showMessage=!0,e.message=t.response.data,e.message.username&&(e.message.username=["Пользователь с таким ником уже существует!"]))}))}},deleteMessage:function(){this.showMessage=!1}}};aa.render=ta,aa.__scopeId="data-v-995eeba6";var sa=aa,ra=(a("ac1f"),a("1276"),Object(s["O"])("data-v-292f1d04"));Object(s["w"])("data-v-292f1d04");var na={class:"wrapper ps-4 pe-4"},oa={class:"d-flex justify-content-between mt-3"},ca={key:0,class:"fw-bold"},la={key:1,class:"fw-bold"},ia={class:"main-block-wrapper"},da={class:"main-block mt-3 p-3"},ua=Object(s["h"])("div",{class:"row order p-0 m-0 mt-3 pb-4"},[Object(s["h"])("div",{class:"col-3 fw-bold"},"Дата"),Object(s["h"])("div",{class:"col-6 text-center fw-bold"},"Заказчики за день"),Object(s["h"])("div",{class:"col-3 text-end fw-bold"},"Сумма заказов")],-1),ba={class:"col-3 d-flex align-items-center"},pa={class:"col-6 d-flex align-items-center"},ha={class:"col-3 d-flex align-items-center justify-content-end"},Oa={key:1,class:"text-center pt-5"},ma={key:0,class:"spinner-border spinner-border fs-5"},fa={key:1,class:"fs-5"};Object(s["u"])();var ja=ra((function(e,t,a,r,n,o){return Object(s["t"])(),Object(s["d"])("div",na,[Object(s["h"])("div",oa,[n.weekNumber?(Object(s["t"])(),Object(s["d"])("h3",ca,"Заказы за неделю "+Object(s["D"])(n.weekNumber.split("W")[1])+", год "+Object(s["D"])(n.weekNumber.split("W")[0].replaceAll("-",""))+": ",1)):(Object(s["t"])(),Object(s["d"])("h3",la,"Заказы за последнюю неделю:")),Object(s["L"])(Object(s["h"])("input",{type:"week","onUpdate:modelValue":t[1]||(t[1]=function(e){return n.weekNumber=e})},null,512),[[s["G"],n.weekNumber]])]),Object(s["h"])("div",ia,[Object(s["h"])("div",da,[ua,n.ordersByWeek.length?(Object(s["t"])(!0),Object(s["d"])(s["a"],{key:0},Object(s["z"])(n.ordersByWeek,(function(e){return Object(s["t"])(),Object(s["d"])("div",{key:e,class:"row order p-0 m-0 mt-3 pb-2"},[Object(s["h"])("div",ba,Object(s["D"])(e.day),1),Object(s["h"])("div",pa,Object(s["D"])(e.customers),1),Object(s["h"])("div",ha,Object(s["D"])(e.total),1)])})),128)):(Object(s["t"])(),Object(s["d"])("div",Oa,[n.loading?(Object(s["t"])(),Object(s["d"])("span",ma)):(Object(s["t"])(),Object(s["d"])("p",fa,"За выбранную неделю заказов нет"))]))])])])})),ga=de.API_URL,va=function(){function e(){Object(ne["a"])(this,e)}return Object(oe["a"])(e,[{key:"getListOrdersByWeek",value:function(){var e=Object(re["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,le.a.post(ga+"orders/open_list",{week_number:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),wa=new va,ya={name:"Home",title:"Заказы за неделю",props:["message"],data:function(){return{ordersByWeek:[],weekNumber:void 0,loading:!1}},created:function(){this.loadListOrdersByWeek()},methods:{loadListOrdersByWeek:function(){var e=this;this.ordersByWeek=[],this.loading=!0,wa.getListOrdersByWeek(this.weekNumber).then((function(t){setTimeout((function(){e.ordersByWeek=t.data,e.loading=!1}),200)}),(function(t){e.loading=!1,404===t.response.status&&e.$router.push({name:"404"})}))}},watch:{weekNumber:function(){this.loadListOrdersByWeek()}}};a("1c29");ya.render=ja,ya.__scopeId="data-v-292f1d04";var ka=ya,xa=(a("2532"),Object(s["O"])("data-v-051a8a07"));Object(s["w"])("data-v-051a8a07");var Ma={class:"wrapper ps-4 pe-4"},_a={class:"d-flex justify-content-between mt-3"},La=Object(s["h"])("h3",{class:"fw-bold"},"Список заказов:",-1),Pa={class:"main-block-wrapper"},Ia={class:"main-block mt-3 p-3 ps-5 pe-5"},$a={class:"row order p-0 m-0 mt-3 pb-4"},Da=Object(s["h"])("div",{class:"col-1 fw-bold"},"ID",-1),Ca=Object(s["h"])("div",{class:"col-3 text-center fw-bold"},"Дата",-1),Ua=Object(s["h"])("div",{class:"col-3 text-center fw-bold"},"Заказчик",-1),Ra=Object(s["h"])("div",{class:"col-3 text-end fw-bold"},"Сумма заказа",-1),Sa={class:"col-2 text-center"},Ba={class:"col-1"},Aa={class:"col-3 text-center"},Na={class:"col-3 text-center"},Ha={class:"col-3 text-end"},Fa={class:"col-2 text-center"},Ea={key:1,class:"text-center pt-5"},Wa={key:0,class:"spinner-border spinner-border fs-5"},qa={key:1,class:"fs-5"},Ta={key:0,class:"d-flex justify-content-center mt-3"};Object(s["u"])();var Va=xa((function(e,t,a,r,n,o){var c=Object(s["B"])("DeleteOrder"),l=Object(s["B"])("AddOrder"),i=Object(s["B"])("Paginator");return Object(s["t"])(),Object(s["d"])("div",Ma,[Object(s["h"])("div",_a,[La,Object(s["h"])("div",null,[n.selectedOrders.length?(Object(s["t"])(),Object(s["d"])(c,{key:0,orders:n.selectedOrders,onDeletedOrders:o.loadListOrders},null,8,["orders","onDeletedOrders"])):Object(s["e"])("",!0),Object(s["h"])(l,{onAddedOrder:o.loadListOrders},null,8,["onAddedOrder"])])]),Object(s["h"])("div",Pa,[Object(s["h"])("div",Ia,[Object(s["h"])("div",$a,[Da,Ca,Ua,Ra,Object(s["h"])("div",Sa,[Object(s["h"])("button",{class:"fw-bold btn shadow-none select-button p-0 ps-3 pe-3 d-inline",onClick:t[1]||(t[1]=function(){return o.selectDeselectAll&&o.selectDeselectAll.apply(o,arguments)})},"Выбрать ")])]),o.orders.length?(Object(s["t"])(!0),Object(s["d"])(s["a"],{key:0},Object(s["z"])(o.orders,(function(e){return Object(s["t"])(),Object(s["d"])("div",{key:e,class:["row order p-0 m-0 pt-3 pb-2",{"selected-block":n.selectedOrders.includes(e.id)}]},[Object(s["h"])("div",Ba,Object(s["D"])(e.id),1),Object(s["h"])("div",Aa,Object(s["D"])(e.created_at.split("T")[0]),1),Object(s["h"])("div",Na,Object(s["D"])(e.customer),1),Object(s["h"])("div",Ha,Object(s["D"])(e.price),1),Object(s["h"])("div",Fa,[Object(s["h"])("i",{class:["fs-6 me-1",{"text-danger fas fa-check-circle":n.selectedOrders.includes(e.id),"far fa-circle":!n.selectedOrders.includes(e.id)}],onClick:function(t){return o.selectDeselectOrder(e.id)}},null,10,["onClick"])])],2)})),128)):(Object(s["t"])(),Object(s["d"])("div",Ea,[n.loading?(Object(s["t"])(),Object(s["d"])("span",Wa)):(Object(s["t"])(),Object(s["d"])("p",qa,"Ещё не было ни одного заказа"))]))])]),o.orders.length?(Object(s["t"])(),Object(s["d"])("div",Ta,[Object(s["h"])(i,{total:n.totalPages},null,8,["total"])])):Object(s["e"])("",!0)])})),za=(a("a434"),a("99af"),Object(s["O"])("data-v-67ea9fce"));Object(s["w"])("data-v-67ea9fce");var Ga={"aria-label":"Переключение страниц",class:"d-flex justify-content-center"},Ja={class:"pagination p-2"};Object(s["u"])();var Xa=za((function(e,t,a,r,n,o){return Object(s["t"])(),Object(s["d"])("nav",Ga,[Object(s["h"])("ul",Ja,[Object(s["h"])("li",{class:["page-item me-1",{disabled:1===o.page}]},[Object(s["h"])("button",Object(s["m"])({class:"btn shadow-none fs-4"},{disabled:1===o.page},{onClick:t[1]||(t[1]=function(e){return o.changePage(o.page-1)}),class:{"pagination-hover":1!==o.page}})," « ",16)],2),(Object(s["t"])(!0),Object(s["d"])(s["a"],null,Object(s["z"])(o.paginatorArray,(function(e){return Object(s["t"])(),Object(s["d"])("li",{key:e,class:["page-item me-1",{active:e===o.page,disabled:"..."===e}]},[Object(s["h"])("button",Object(s["m"])({class:"btn shadow-none fs-4"},{disabled:e===o.page||"..."===e},{onClick:function(t){return o.changePage(e)},class:{"pagination-active":e===o.page,"pagination-hover":e!==o.page}}),Object(s["D"])(e),17,["onClick"])],2)})),128)),Object(s["h"])("li",{class:["page-item",{disabled:o.page===a.total}]},[Object(s["h"])("button",Object(s["m"])({class:"btn shadow-none fs-4"},{disabled:o.page===a.total},{onClick:t[2]||(t[2]=function(e){return o.changePage(o.page+1)}),class:{"pagination-hover":o.page!==a.total}})," » ",16)],2)])])}));function Ka(e,t){var a=t>=e?[e]:[],s=e;while(s<t)a.push(s+=1);return a}function Qa(e,t){var a=1,s=[];return s=t-a<=3?Ka(a,t):[a,"...",t-1,t],s=e-t<=3?s.concat(Ka(t+1,e)):s.concat([t+1,"...",e]),s}var Ya={name:"Paginator",props:["total"],computed:{page:function(){return this.$store.state.page},paginatorArray:function(){return Qa(this.total,this.page)}},methods:{changePage:function(e){this.$store.commit("changePage",e)}}};Ya.render=Xa,Ya.__scopeId="data-v-67ea9fce";var Za=Ya,es=Object(s["O"])("data-v-75672ae4");Object(s["w"])("data-v-75672ae4");var ts=Object(s["h"])("button",{type:"button",class:"btn add-button","data-bs-toggle":"modal","data-bs-target":"#modalAddOrder"},[Object(s["h"])("svg",{class:"-ml-0.5 mr-2 h-6 w-6",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"#ffffff"},[Object(s["h"])("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})]),Object(s["g"])(" Добавить ")],-1),as={class:"modal fade",id:"modalAddOrder",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ss={class:"modal-dialog"},rs={class:"modal-content"},ns=Object(s["h"])("div",{class:"modal-header"},[Object(s["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},"Добавление заказа"),Object(s["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),os={class:"modal-body"},cs={class:"mb-3 row pe-5 ps-5 d-flex align-items-center justify-content-between"},ls=Object(s["h"])("label",{class:"col-5 col-form-label p-0 fs-6"},"Заказчик",-1),is={class:"col-7 ps-3 pe-0 pt-2 pb-2"},ds={class:"mb-2 row pe-5 ps-5 d-flex align-items-center justify-content-between"},us=Object(s["h"])("label",{for:"inputPrice",class:"col-5 col-form-label p-0 fs-6"},"Стоимость",-1),bs={class:"col-7 ps-3 pe-0 mt-2"},ps={class:"modal-footer"},hs=Object(s["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть",-1),Os={type:"submit",class:"btn btn-primary"},ms={class:"spinner-border spinner-border-sm me-1"},fs=Object(s["h"])("span",null,"Добавить",-1);Object(s["u"])();var js=es((function(e,t,a,r,n,o){var c=Object(s["B"])("FormMessage"),l=Object(s["B"])("vue-select");return Object(s["t"])(),Object(s["d"])(s["a"],null,[ts,Object(s["h"])("div",as,[Object(s["h"])("div",ss,[Object(s["h"])("form",{onSubmit:t[3]||(t[3]=Object(s["N"])((function(){return o.addOrder&&o.addOrder.apply(o,arguments)}),["prevent"]))},[Object(s["h"])("div",rs,[ns,Object(s["h"])("div",os,[n.showMessage?(Object(s["t"])(),Object(s["d"])(c,{key:0,message:n.message,onHideMessage:o.hideMessage},null,8,["message","onHideMessage"])):Object(s["e"])("",!0),Object(s["h"])("div",cs,[ls,Object(s["h"])("div",is,[Object(s["h"])(l,{class:"fs-3",modelValue:n.form.customer,"onUpdate:modelValue":t[1]||(t[1]=function(e){return n.form.customer=e}),options:n.options.customers,searchable:"","close-on-select":"",placeholder:"Выберите заказчика:","search-placeholder":n.form.customer?n.form.customer:"Поиск"},null,8,["modelValue","options","search-placeholder"])])]),Object(s["h"])("div",ds,[us,Object(s["h"])("div",bs,[Object(s["L"])(Object(s["h"])("input",{required:"","onUpdate:modelValue":t[2]||(t[2]=function(e){return n.form.price=e}),type:"number",min:"1",class:"form-control p-2",name:"time",id:"inputPrice",oninput:"validity.valid||(value='');"},null,512),[[s["G"],n.form.price]])])])]),Object(s["h"])("div",ps,[hs,Object(s["h"])("button",Os,[Object(s["L"])(Object(s["h"])("span",ms,null,512),[[s["H"],n.loading]]),fs])])])],32)])])],64)})),gs=(a("d81d"),a("0685")),vs={name:"AddOrder",components:{FormMessage:Le,"vue-select":gs["a"]},emits:["added-order"],data:function(){return{loading:!1,form:{customer:"",price:""},options:{customers:[]},message:"",showMessage:!1}},created:function(){this.loadListCustomers()},methods:{loadListCustomers:function(){var e=this;pe.getListCustomers().then((function(t){e.options.customers=t.data.map((function(e){return e.user}))}))},preparedFormData:function(){var e=new FormData;return e.append("customer",this.form.customer),e.append("price",this.form.price),e},cleanForm:function(){this.form.price="",this.form.customer=""},addOrder:function(){var e=this;this.simpleValidate()&&(this.loading=!0,me.addOrder(this.preparedFormData()).then((function(){e.loading=!1,e.$emit("added-order"),e.hideModal(),e.cleanForm()})))},simpleValidate:function(){var e=!0;return this.form.price||(this.message={price:['Поле "стоимость" обязательное!']},this.showMessage=!0,e=!1),this.form.customer||(this.message={customer:['Поле "заказчик" обязательное!']},this.showMessage=!0,e=!1),e},hideModal:function(){var e=document.querySelector("#modalAddOrder"),t=se["a"].getInstance(e);t.hide()},hideMessage:function(){this.showMessage=!1}}};a("aa9b");vs.render=js,vs.__scopeId="data-v-75672ae4";var ws=vs,ys=Object(s["O"])("data-v-5b02a5bd");Object(s["w"])("data-v-5b02a5bd");var ks=Object(s["h"])("button",{type:"button",class:"btn delete-button text-light pt-2 pb-2 h-100 me-2","data-bs-toggle":"modal","data-bs-target":"#modalDeleteOrder"},[Object(s["h"])("i",{class:"fas fa-trash fs-5"}),Object(s["g"])(" Удалить ")],-1),xs={class:"modal fade",id:"modalDeleteOrder",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ms={class:"modal-dialog"},_s={class:"modal-content"},Ls=Object(s["h"])("div",{class:"modal-header"},[Object(s["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},"Удаление"),Object(s["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ps=Object(s["h"])("div",{class:"modal-body"}," Вы точно хотите удалить выбранные заказы? ",-1),Is={class:"modal-footer"},$s=Object(s["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть",-1);Object(s["u"])();var Ds=ys((function(e,t,a,r,n,o){return Object(s["t"])(),Object(s["d"])(s["a"],null,[ks,Object(s["h"])("div",xs,[Object(s["h"])("div",Ms,[Object(s["h"])("div",_s,[Ls,Ps,Object(s["h"])("div",Is,[$s,Object(s["h"])("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=function(){return o.deleteOrders&&o.deleteOrders.apply(o,arguments)})},"Удалить")])])])])],64)})),Cs={name:"DeleteOrder",props:["orders"],emits:["deleted-orders"],methods:{deleteOrders:function(){var e=this;me.deleteListOrders(this.orders).then((function(){e.$emit("deleted-orders"),e.hideModal()}))},hideModal:function(){var e=document.querySelector("#modalDeleteOrder"),t=se["a"].getInstance(e);t.hide()}}};Cs.render=Ds,Cs.__scopeId="data-v-5b02a5bd";var Us=Cs,Rs={name:"Orders",title:"Все заказы",components:{DeleteOrder:Us,AddOrder:ws,Paginator:Za},data:function(){return{loading:!1,totalPages:"",selectedOrders:[]}},computed:{currentUser:function(){return this.$store.state.auth.user},pageStateOptions:function(){return{page:this.page}},queryParams:function(){return{page:this.$route.query.page}},page:function(){return this.$store.state.page},orders:function(){return this.$store.state.orders}},created:function(){this.initUrlParams(this.page),this.loadListOrders()},methods:{makeParams:function(){return{page:this.page}},initUrlParams:function(e){e&&this.$route.query.page&&this.$store.commit("changePage",parseInt(this.$route.query.page))},loadListOrders:function(){var e=this;this.selectedOrders=[],this.loading=!0,me.getListOrders(this.makeParams()).then((function(t){e.loading=!1,e.$store.commit("changeOrders",t.data.response),e.totalPages=t.data["pages_count"]}),(function(t){e.loading=!1,404===t.response.status&&e.$router.push({name:"404"})}))},selectDeselectOrder:function(e){this.selectedOrders.includes(e)?this.selectedOrders.splice(this.selectedOrders.indexOf(e),1):this.selectedOrders.push(e)},selectDeselectAll:function(){if(this.selectedOrders.length)this.selectedOrders=[];else for(var e in this.orders)this.selectedOrders.push(this.orders[e].id)}},watch:{pageStateOptions:function(e){1===e.page?this.$router.push("".concat(window.location.pathname)):this.$router.push("".concat(window.location.pathname,"?page=").concat(e.page))},page:function(){this.loadListOrders()},$route:function(){this.$route.name!==this.$options.name&&this.$store.commit("changePage",1)},queryParams:function(e){this.$route.name===this.$options.name&&this.$store.commit("changePage",e.page?parseInt(e.page):1)}}};Rs.render=Va,Rs.__scopeId="data-v-051a8a07";var Ss=Rs,Bs="itorum_test",As=[{path:"/".concat(Bs,"/orders"),name:"Orders",component:Ss,props:!0},{path:"/".concat(Bs),name:"Home",component:ka,props:!0},{path:"/".concat(Bs,"/login"),name:"Login",component:Lt},{path:"/".concat(Bs,"/register"),name:"Register",component:sa},{path:"/".concat(Bs,"/404"),name:"404",component:nt,props:!0}],Ns=Object(Xe["a"])({history:Object(Xe["b"])(),routes:As,scrollBehavior:function(){return window.scrollTo({top:0,behavior:"smooth"})}});Ns.beforeEach((function(e,t,a){var s=["404","Login","Register","Home"],r=!s.includes(e.name),n=localStorage.getItem("user");return e.name?r&&!n?a({name:"Login"}):a():a({name:"404"})}));var Hs=Ns,Fs=a("2106"),Es=a.n(Fs);a("ab8b");function Ws(e){var t=e.$options.title;if(t)return"function"===typeof t?t.call(e):t}var qs={created:function(){var e=Ws(this);e&&(document.title=e)}},Ts=Object(s["c"])(Fe);Ts.use(Hs),Ts.use(Je),Ts.use(Es.a,le.a),Ts.component("vue-select",gs["a"]),Ts.mixin(qs),Ts.mount("#app")},"5b63":function(e,t,a){},"5cd2":function(e,t,a){"use strict";a("5b63")},6860:function(e,t,a){},8405:function(e,t,a){"use strict";a("d579")},aa9b:function(e,t,a){"use strict";a("ba68")},ba68:function(e,t,a){},bce6:function(e,t,a){},d579:function(e,t,a){},fe6c:function(e,t,a){"use strict";a("bce6")}});
//# sourceMappingURL=app.28897810.js.map